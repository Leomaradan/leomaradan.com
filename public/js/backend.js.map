{"version":3,"sources":["backend.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"backend.js","sourcesContent":["\n/**\n * First we will load all of this project's JavaScript dependencies which\n * include Vue and Vue Resource. This gives a great starting point for\n * building robust, powerful web applications using Vue and Laravel.\n */\n\n//require('./bootstrap');\n\n/**\n * Next, we will create a fresh Vue application instance and attach it to\n * the body of the page. From here, you may begin adding components to\n * the application, or feel free to tweak this setup for your needs.\n */\n\n/*Vue.component('example', require('./components/Example.vue'));\n\nconst app = new Vue({\n    el: 'body'\n});\n*/\n\n/*var adminmenu = new Vue({\n    el: '#adminmenu',\n    data: {\n        items: [\n            {name: 'admin', href:'#'}\n        ]\n    }\n});*/\n\nvar app = new Vue({\n    el: 'body',\n    /*components: {\n        alert: alert,\n        navbar: navbar,\n    },*/\n    data: {\n        test: 'test2',\n        items: [],\n        errors: [],\n        successes: []\n    } \n});\n\nvar jsonp = {};\n\nvar iniForm = function(e) {\n    e.each(function() {\n         $(this).data('initial', $(this).val());\n    });\n};\n\njQuery(document).ready(function ($) {\n\n    var storageMenu = Store.get(\"adminmenu\");\n    if(storageMenu !== null) {\n        app.items = storageMenu;\n    }\n    $.getJSON('api/admin', function(data) {\n        app.items = data;\n        Store.set('adminmenu', data);\n    });\n\n    $(document).on(\"click\", \".modal-link\", function() {\n            var src = $(this).attr('href');\n            var height = $(this).attr('data-height') || 300;\n            var width = $(this).attr('data-width') || 860;\n            //var \n\n            $(\"#modal_link_frame iframe\").attr({'src':src,\n                               'height': height,\n                               'width': width});\n\n            return false;\n    });\n\n    iniForm($(\".inline-edit\"));\n\n    $(document).on('change', '.inline-edit', function() {\n        var mod = 0;\n        if($(this).val() !== $(this).data('initial')) {\n            $(this).data('modified', 'true');\n            mod = 1;\n        } else {\n            $(this).data('modified', 'false');\n        }\n\n        $(this).siblings().each(function() {\n            if($(this).val() !== $(this).data('initial')) {\n                mod++;\n            }\n        });\n\n        if(mod > 0) {\n            $(this).parents('tr').addClass('info'); \n        } else {\n            $(this).parents('tr').removeClass('info'); \n        }\n\n        \n    });\n\n\n    $(document).on(\"click\", \".rest-link, .ajax-button\", function () {\n\n        var url = $(this).data(\"url\");\n\n        if (url === undefined) {\n            url = $(this).attr(\"href\");\n        }\n\n        if($(this).hasClass(\"rest-link-confirm\")) {\n            var message = ($(this).data(\"confirm\") !== undefined) ? $(this).data(\"confirm\") : \"ÃŠtes vous sur ?\";\n            if(!confirm(message)) {\n                return;\n            }\n        }\n\n        var method = $(this).data(\"method\");\n\n        var precall_fn = $(this).data(\"precall\");\n\n        var data = {};\n\n        data._token = $(this).data(\"token\");\n        data.callback = $(this).data(\"callback\");\n        data.id = $(this).data(\"id\");\n\n        if(precall_fn !== undefined) {\n            var fn = window[precall_fn];\n            if(typeof fn === 'function') {\n                data = fn(data);\n            }\n        }\n\n        $(\".errors\").empty();\n\n        $.ajax({\n            type: method,\n            url: url, //resource\n            data: data,\n            complete: function (response) {\n\n            },\n            error: function (response) {\n\n                //var errors = $(\".errors\"),\n                    //classes = errors.data(\"surround-class\"),\n                    //message = $(\"<div class='\" + classes + \"' />\").append($(\"<ul/>\")),\n                    //message = $(\"<alert type='danger' />\").append($(\"<ul/>\")),\n                //var list = Object.keys(response.responseJSON).map(function(value, index) {  });\n                var list = response.responseJSON;\n\n                $.each(list, function(i) {\n                    app.errors.push(list[i]);\n                    //var li = $('<li/>').appendTo(message);\n\n                    //var aaa = $('<span/>').text(list[i]).appendTo(li);\n                });\n\n\n                //errors.append(message);\n\n            }\n        });\n\n        return false;\n    });\n});\n\njsonp.delete_element = function (data) {\n    $(\"[data-id='\"+data.id+\"']\").remove();\n};\n\njsonp.update_element = function (data) {\n    var e = $(\"[data-id='\"+data.id+\"']\");\n    for(var k in data) {\n       e.find(\"input[name='\"+k+\"']\").val(data[k]);\n    }   \n    iniForm(e.find('.inline-edit'));\n    e.removeClass('info');\n};\n\nfunction get_table_element(data) {\n    $(\"[data-id='\"+ data.id +\"'] input\").each(function() {\n        var key = $(this).attr('name');\n        var value = $(this).val();\n        data[key] = value;\n    });\n\n    return data;\n}"],"sourceRoot":"/source/"}