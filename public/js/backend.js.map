{"version":3,"sources":["backend.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"backend.js","sourcesContent":["\r\n/**\r\n * First we will load all of this project's JavaScript dependencies which\r\n * include Vue and Vue Resource. This gives a great starting point for\r\n * building robust, powerful web applications using Vue and Laravel.\r\n */\r\n\r\n//require('./bootstrap');\r\n\r\n/**\r\n * Next, we will create a fresh Vue application instance and attach it to\r\n * the body of the page. From here, you may begin adding components to\r\n * the application, or feel free to tweak this setup for your needs.\r\n */\r\n\r\n/*Vue.component('example', require('./components/Example.vue'));\r\n\r\nconst app = new Vue({\r\n    el: 'body'\r\n});\r\n*/\r\n\r\n/*var adminmenu = new Vue({\r\n    el: '#adminmenu',\r\n    data: {\r\n        items: [\r\n            {name: 'admin', href:'#'}\r\n        ]\r\n    }\r\n});*/\r\n\r\nvar app = new Vue({\r\n    el: 'body',\r\n    /*components: {\r\n        alert: alert,\r\n        navbar: navbar,\r\n    },*/\r\n    data: {\r\n        test: 'test2',\r\n        items: [],\r\n        errors: [],\r\n        successes: []\r\n    } \r\n});\r\n\r\nvar jsonp = {};\r\n\r\nvar iniForm = function(e) {\r\n    e.each(function() {\r\n         $(this).data('initial', $(this).val());\r\n    });\r\n};\r\n\r\njQuery(document).ready(function ($) {\r\n\r\n    var storageMenu = Store.get(\"adminmenu\");\r\n    if(storageMenu !== null) {\r\n        app.items = storageMenu;\r\n    }\r\n    $.getJSON('api/admin', function(data) {\r\n        app.items = data;\r\n        Store.set('adminmenu', data);\r\n    });\r\n\r\n    $(document).on(\"click\", \".modal-link\", function() {\r\n            var src = $(this).attr('href');\r\n            var height = $(this).attr('data-height') || 300;\r\n            var width = $(this).attr('data-width') || 860;\r\n            //var \r\n\r\n            $(\"#modal_link_frame iframe\").attr({'src':src,\r\n                               'height': height,\r\n                               'width': width});\r\n\r\n            return false;\r\n    });\r\n\r\n    iniForm($(\".inline-edit\"));\r\n\r\n    $(document).on('change', '.inline-edit', function() {\r\n        var mod = 0;\r\n        if($(this).val() !== $(this).data('initial')) {\r\n            $(this).data('modified', 'true');\r\n            mod = 1;\r\n        } else {\r\n            $(this).data('modified', 'false');\r\n        }\r\n\r\n        $(this).siblings().each(function() {\r\n            if($(this).val() !== $(this).data('initial')) {\r\n                mod++;\r\n            }\r\n        });\r\n\r\n        if(mod > 0) {\r\n            $(this).parents('tr').addClass('info'); \r\n        } else {\r\n            $(this).parents('tr').removeClass('info'); \r\n        }\r\n\r\n        \r\n    });\r\n\r\n\r\n    $(document).on(\"click\", \".rest-link, .ajax-button\", function () {\r\n\r\n        var url = $(this).data(\"url\");\r\n\r\n        if (url === undefined) {\r\n            url = $(this).attr(\"href\");\r\n        }\r\n\r\n        if($(this).hasClass(\"rest-link-confirm\")) {\r\n            var message = ($(this).data(\"confirm\") !== undefined) ? $(this).data(\"confirm\") : \"ÃŠtes vous sur ?\";\r\n            if(!confirm(message)) {\r\n                return;\r\n            }\r\n        }\r\n\r\n        var method = $(this).data(\"method\");\r\n\r\n        var precall_fn = $(this).data(\"precall\");\r\n\r\n        var data = {};\r\n\r\n        data._token = $(this).data(\"token\");\r\n        data.callback = $(this).data(\"callback\");\r\n        data.id = $(this).data(\"id\");\r\n\r\n        if(precall_fn !== undefined) {\r\n            var fn = window[precall_fn];\r\n            if(typeof fn === 'function') {\r\n                data = fn(data);\r\n            }\r\n        }\r\n\r\n        $(\".errors\").empty();\r\n\r\n        $.ajax({\r\n            type: method,\r\n            url: url, //resource\r\n            data: data,\r\n            complete: function (response) {\r\n\r\n            },\r\n            error: function (response) {\r\n\r\n                //var errors = $(\".errors\"),\r\n                    //classes = errors.data(\"surround-class\"),\r\n                    //message = $(\"<div class='\" + classes + \"' />\").append($(\"<ul/>\")),\r\n                    //message = $(\"<alert type='danger' />\").append($(\"<ul/>\")),\r\n                //var list = Object.keys(response.responseJSON).map(function(value, index) {  });\r\n                var list = response.responseJSON;\r\n\r\n                $.each(list, function(i) {\r\n                    app.errors.push(list[i]);\r\n                    //var li = $('<li/>').appendTo(message);\r\n\r\n                    //var aaa = $('<span/>').text(list[i]).appendTo(li);\r\n                });\r\n\r\n\r\n                //errors.append(message);\r\n\r\n            }\r\n        });\r\n\r\n        return false;\r\n    });\r\n});\r\n\r\njsonp.delete_element = function (data) {\r\n    $(\"[data-id='\"+data.id+\"']\").remove();\r\n};\r\n\r\njsonp.delete_elements = function (data) {\r\n    $.each(data.ids, function(i) {\r\n        $(\"[data-id='\"+data.ids[i]+\"']\").remove();\r\n    }); \r\n};\r\n\r\njsonp.update_element = function (data) {\r\n    var e = $(\"[data-id='\"+data.id+\"']\");\r\n    for(var k in data) {\r\n       e.find(\"input[name='\"+k+\"']\").val(data[k]);\r\n    }   \r\n    iniForm(e.find('.inline-edit'));\r\n    e.removeClass('info');\r\n};\r\n\r\nfunction get_table_element(data) {\r\n    $(\"[data-id='\"+ data.id +\"'] input\").each(function() {\r\n        var key = $(this).attr('name');\r\n        var value = $(this).val();\r\n        data[key] = value;\r\n    });\r\n\r\n    return data;\r\n}"],"sourceRoot":"/source/"}